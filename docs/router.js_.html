<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: router.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: router.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileOverview AppRouter handles the navigation logic of the application. 
 * @class
 *
 * @requires Backbone.js
 * @requires Underscore.js
 * @requires Topic.js
 * @requires d3.js
 * @require d3.layout.cloud.js
 * @require TopicsCollection.js
 * @author Paul-Michael Sorhaindo
 * @version 0.0.1
 */

define([
    'jquery',
    'underscore',
    'backbone',
    'views/topics/cloud',
    'views/topic/details',
    'collections/topics'
], function($, _, Backbone, TopicCloud, TopicDetails, TopicsCollection){

    /**
     * Constructs the AppRouter object.
     * @namespace AppRouter
     * @constructor
     */
    var AppRouter = Backbone.Router.extend({
        routes:{
            // route details
            "topic/:label": 'details',
            // route return (close) to just cloud
            "cloud": 'cloud',
			// Default
			'*actions': 'defaultAction'
		}
	});
    
    /**
     * Initializes the app Router object, creating a new TopicCollection and fetching the data from default location.
     * Events are then set to handle routes for the TopicDetailsView as well as the TopicCloudView.
     * A default route is also created to handle erroneous URLs.
     * History is maintained using Backbone.history and the initialized TopicCloud is rendered once the TopicCollection data is recieved.
     *
     * @public
     */
	var initialize = function(){
        var app_router = new AppRouter;
        var topicsList = new TopicsCollection();
        // Grab JSON topics data 
        topicsList.fetch({reset: true});
        
        topicsList.on("reset", this.render, this);
        
		// Pass details label via param.
		app_router.on('route:details',function(id){ // TODO change to id.
            // Show details view for a selected topic
            console.log('Show details: '+id);
            var model = topicsList.get(id);
            var topicDetailsView = new TopicDetails({el: $("#details"), model: model});
            
		});
        
        app_router.on('route:cloud',function(){
            // Hide details view
            console.log('Close details view.');
            $("#details").html("");
		});
        
        // catch illegal routes.
		app_router.on('route:defaultAction', function(actions) {
			// No matching route - print URL
			console.log('No route:',actions);
		});
        
        // Begin recording history for Router's back functionality
		Backbone.history.start();
        
        // Display Topic Cloud
        var topicCloudView = new TopicCloud({el: $("#cloud"), collection: topicsList});
        topicCloudView.render();
        
	};
    
    /**
     * @returns{function} - The initialize function for the Router object.
     */
	return {
		initialize: initialize
	};
    
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AppRouter.html">AppRouter</a></li><li><a href="topics.js.html">js/collections/topics.js</a></li><li><a href="topic.js.html">js/models/topic.js</a></li><li><a href="router.js.html">js/router.js</a></li><li><a href="details.js.html">js/views/topic/details.js</a></li><li><a href="cloud.js.html">js/views/topics/cloud.js</a></li><li><a href="TopicCloudView.html">TopicCloudView</a></li><li><a href="TopicCollection.html">TopicCollection</a></li><li><a href="TopicModel.html">TopicModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#defaults">defaults</a></li><li><a href="global.html#fontSizeScale">fontSizeScale</a></li><li><a href="global.html#height">height</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#model">model</a></li><li><a href="global.html#negSentimentUpperBound">negSentimentUpperBound</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#posSentimentLowerBound">posSentimentLowerBound</a></li><li><a href="global.html#prepareCloud">prepareCloud</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#url">url</a></li><li><a href="global.html#width">width</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Tue Sep 09 2014 01:47:23 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
